# Safari Web Inspector セットアップガイド

## iPhone側の設定

1. iPhoneで**「設定」**アプリを開く
2. 下にスクロールして**「Safari」**をタップ
3. 一番下までスクロールして**「詳細」**をタップ
4. **「Webインスペクタ」**のトグルを**ON**にする

## Mac側の設定（既に完了）

✅ Safari → 環境設定 → 詳細 → 「メニューバーに開発メニューを表示」にチェック

## デバッグ手順

1. **iPhoneをMacにUSBケーブルで接続**
2. **iPhoneのSafariで対象のWebアプリを開く**
   - 本番環境: `https://[デプロイURL]`
   - テストページ: `https://[デプロイURL]/qr-test.html`
3. **MacのSafariを開く**
4. **メニューバーの「開発」→ [iPhone名] → [開いているページ]を選択**
5. **Webインスペクタが開く**

## ウォレットQRスキャンのデバッグ

Webインスペクタが開いたら:

1. **コンソールタブを開く**
2. **アプリでウォレットQRスキャンを試みる**
3. **以下のログを確認:**
   - `📸 QRコード読み取り成功` が出るか？
     - 出る → バリデーション問題
     - 出ない → QRデコード問題
   - `✅ バリデーション成功` が出るか？
     - 出ない → バリデーションロジックの問題
   - エラーメッセージの内容は？

## 期待される動作

### 成功パターン:
```
📸 QRコード読み取り成功: ethereum:0x66F1274aD5d042b7571C2EfA943370dbcd3459aB@137
✅ Ethereum URI形式として認識
✅ バリデーション成功 - スキャナー停止処理開始
✅ スキャナー停止成功
✅ コールバック実行: ethereum:0x66F1274aD5d042b7571C2EfA943370dbcd3459aB...
```

### 失敗パターン例:

#### パターンA: QRデコード失敗
```
⚠️ QRスキャンエラー: [エラーメッセージ]
❌ カメラ初期化エラー: [エラー詳細]
```
→ **原因**: html5-qrcodeライブラリがQRを読み取れていない
→ **対策**: 別のライブラリ(jsQR, zxing-js)に変更

#### パターンB: バリデーション失敗
```
📸 QRコード読み取り成功: [データ]
❌ バリデーション失敗: 無効なQRコードです
```
→ **原因**: バリデーションロジックの問題
→ **対策**: validateAndProcessScan関数の修正

## 次のアクション

デバッグ結果を共有していただければ、具体的な解決策を提案できます:

1. スクリーンショットでログ全体を共有
2. または、主要なログメッセージをコピー&ペースト
