// src/admin/FlagNFTManagementPage.tsx
// ãƒ•ãƒ©ã‚°NFTç®¡ç†ãƒšãƒ¼ã‚¸
// æ³•å‹™å¯¾å¿œ: ã€Œå•†å“ã€ã€Œè³¼å…¥ã€ãªã©ã®è¡¨ç¾ã‚’ä½¿ç”¨ã›ãšã€ã€Œç‰¹å…¸ã€ã€Œãƒãƒƒãƒ—ã€ã§çµ±ä¸€

import React, { useState, useRef, useEffect } from 'react';
import type { FlagNFTCategory } from '../../types/flagNFT';
import { uploadImage, deleteFileFromUrl } from '../../lib/supabase';
import { adminSupabase } from '../../lib/adminSupabase';
import { useTenant } from '../contexts/TenantContext';
import { useMintFlagNFT, useConfigureCategory } from '../../hooks/useFlagNFTContract';
import {
  BenefitConfigForm,
  MembershipConfigForm,
  AchievementConfigForm,
  CampaignConfigForm,
  AccessPassConfigForm,
  CollectibleConfigForm,
} from './FlagNFTCategoryForms';
import { executeSaveFlagNFTWorkflow } from '../utils/flagNFTSaveWorkflow';
import { estimateGasCost, getSuccessMessage } from '../utils/flagNFTContractIntegration';

type CreateStep = 'category' | 'basic' | 'detail';

interface CategoryOption {
  id: FlagNFTCategory;
  label: string;
  icon: string;
  description: string;
  color: string;
}

const CATEGORY_OPTIONS: CategoryOption[] = [
  {
    id: 'BENEFIT',
    label: 'ç‰¹å…¸NFT',
    icon: 'ğŸ’³',
    description: 'å‰²å¼•ã‚„ç‰¹å…¸ã‚’æä¾›ã™ã‚‹NFT',
    color: '#3b82f6',
  },
  {
    id: 'MEMBERSHIP',
    label: 'ä¼šå“¡è¨¼NFT',
    icon: 'ğŸ‘¤',
    description: 'ä¼šå“¡è³‡æ ¼ã¨ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’è¨¼æ˜',
    color: '#8b5cf6',
  },
  {
    id: 'ACHIEVEMENT',
    label: 'å®Ÿç¸¾ãƒãƒƒã‚¸NFT',
    icon: 'ğŸ†',
    description: 'ãƒãƒƒãƒ—å›æ•°ã‚„é”æˆæ¡ä»¶ã§è‡ªå‹•é…å¸ƒ',
    color: '#f59e0b',
  },
  {
    id: 'CAMPAIGN',
    label: 'ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³NFT',
    icon: 'ğŸª',
    description: 'æœŸé–“é™å®šã‚¤ãƒ™ãƒ³ãƒˆã‚„ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³',
    color: '#ec4899',
  },
  {
    id: 'ACCESS_PASS',
    label: 'ã‚¢ã‚¯ã‚»ã‚¹æ¨©NFT',
    icon: 'ğŸ—ï¸',
    description: 'ç‰¹å®šã‚¨ãƒªã‚¢ã‚„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹',
    color: '#10b981',
  },
  {
    id: 'COLLECTIBLE',
    label: 'ã‚³ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ãƒ«NFT',
    icon: 'ğŸ´',
    description: 'ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³è¦ç´ ã‚’æŒã¤NFT',
    color: '#6366f1',
  },
];

interface BasicFormData {
  name: string;
  description: string;
  image: string;
  validFrom: string;
  validUntil: string;
  usageLimit: string;
  maxSupply: string;
  isTransferable: boolean;
  isBurnable: boolean;
  autoDistributionEnabled: boolean;
  requiredTipAmount: string;
  targetToken: 'JPYC' | 'tNHT' | 'both';
}

interface BenefitFormData {
  discountType: 'PERCENTAGE' | 'FIXED_AMOUNT' | 'GIFT_ITEM';
  discountValue: string;
  minTipAmount: string;
  applicableGifts: string;
  maxDiscountAmount: string;
}

interface CheckpointFormData {
  id: string;
  name: string;
  description: string;
  nfcTagId: string;
  nfcEnabled: boolean;
  qrCode: string;
  qrEnabled: boolean;
  locationLat: string;
  locationLng: string;
  radiusMeters: string;
}

interface StampRallyFormData {
  checkpoints: CheckpointFormData[];
  completionReward: string;
  requireSequential: boolean;
  verificationMethod: 'NFC' | 'QR' | 'BOTH';
}

interface MembershipFormData {
  membershipLevel: string;
  accessAreas: string; // ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š
  benefits: string; // ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š
  renewalType: 'AUTO' | 'MANUAL' | 'NONE';
}

interface AchievementFormData {
  triggerType: 'TIP_COUNT' | 'TOTAL_TIPPED' | 'GIFT_COLLECTION' | 'MANUAL';
  threshold: string;
  autoDistribute: boolean;
  additionalBenefits: string; // ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š
}

interface CollectibleFormData {
  seriesName: string;
  seriesNumber: string;
  totalInSeries: string;
  collectionGoal: string;
  progressReward: string;
  distributionTrigger: 'TIP_AMOUNT' | 'EVENT_PARTICIPATION' | 'CAMPAIGN' | 'MANUAL';
  requiredCondition: string;
  artist: string;
  releaseDate: string;
  description: string;
}

export default function FlagNFTManagementPage() {
  const { tenantId } = useTenant();
  const [view, setView] = useState<'list' | 'create'>('list');
  const [createStep, setCreateStep] = useState<CreateStep>('category');
  const [selectedCategory, setSelectedCategory] = useState<FlagNFTCategory | null>(null);
  const [categoryFilter, setCategoryFilter] = useState<FlagNFTCategory | 'ALL'>('ALL');
  const [isSaving, setIsSaving] = useState(false);

  // NFTãƒªã‚¹ãƒˆç®¡ç†ç”¨ã®çŠ¶æ…‹
  const [flagNFTs, setFlagNFTs] = useState<any[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [refreshTrigger, setRefreshTrigger] = useState(0);

  // ãƒŸãƒ³ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ«ç”¨ã®çŠ¶æ…‹
  const [showMintModal, setShowMintModal] = useState(false);
  const [selectedNFTForMint, setSelectedNFTForMint] = useState<any | null>(null);
  const [mintToAddress, setMintToAddress] = useState('');
  const [isMinting, setIsMinting] = useState(false);

  // ãƒŸãƒ³ãƒˆç”¨ãƒ•ãƒƒã‚¯
  const { mint: mintNFT, isLoading: isMintLoading } = useMintFlagNFT();

  // ã‚«ãƒ†ã‚´ãƒªè¨­å®šç”¨ãƒ•ãƒƒã‚¯
  const { configure: configureCategory, isLoading: isConfiguringCategory } = useConfigureCategory();

  // åŸºæœ¬æƒ…å ±ãƒ•ã‚©ãƒ¼ãƒ ã®çŠ¶æ…‹
  const [formData, setFormData] = useState<BasicFormData>({
    name: '',
    description: '',
    image: '',
    validFrom: new Date().toISOString().split('T')[0],
    validUntil: '',
    usageLimit: '-1',
    maxSupply: '',
    isTransferable: false,
    isBurnable: false,
    autoDistributionEnabled: false,
    requiredTipAmount: '',
    targetToken: 'both',
  });
  const [isUploading, setIsUploading] = useState(false);
  const fileInputRef = useRef<HTMLInputElement>(null);

  // ç‰¹å…¸NFTè©³ç´°è¨­å®šãƒ•ã‚©ãƒ¼ãƒ ã®çŠ¶æ…‹
  const [benefitData, setBenefitData] = useState<BenefitFormData>({
    discountType: 'PERCENTAGE',
    discountValue: '',
    minTipAmount: '',
    applicableGifts: '',
    maxDiscountAmount: '',
  });

  // ã‚¹ã‚¿ãƒ³ãƒ—ãƒ©ãƒªãƒ¼NFTè©³ç´°è¨­å®šãƒ•ã‚©ãƒ¼ãƒ ã®çŠ¶æ…‹
  const [stampRallyData, setStampRallyData] = useState<StampRallyFormData>({
    checkpoints: [],
    completionReward: '',
    requireSequential: false,
    verificationMethod: 'BOTH',
  });

  // ä¼šå“¡è¨¼NFTè©³ç´°è¨­å®šãƒ•ã‚©ãƒ¼ãƒ ã®çŠ¶æ…‹
  const [membershipData, setMembershipData] = useState<MembershipFormData>({
    membershipLevel: '',
    accessAreas: '',
    benefits: '',
    renewalType: 'NONE',
  });

  // å®Ÿç¸¾ãƒãƒƒã‚¸NFTè©³ç´°è¨­å®šãƒ•ã‚©ãƒ¼ãƒ ã®çŠ¶æ…‹
  const [achievementData, setAchievementData] = useState<AchievementFormData>({
    triggerType: 'TIP_COUNT',
    threshold: '',
    autoDistribute: false,
    additionalBenefits: '',
  });

  // ã‚³ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ãƒ«NFTè©³ç´°è¨­å®šãƒ•ã‚©ãƒ¼ãƒ ã®çŠ¶æ…‹
  const [collectibleData, setCollectibleData] = useState<CollectibleFormData>({
    seriesName: '',
    seriesNumber: '',
    totalInSeries: '',
    collectionGoal: '',
    progressReward: '',
    distributionTrigger: 'MANUAL',
    requiredCondition: '',
    artist: '',
    releaseDate: '',
    description: '',
  });

  // ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
  const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (!file) return;

    setIsUploading(true);
    try {
      // å¤ã„ç”»åƒãŒã‚ã‚Œã°å‰Šé™¤
      if (formData.image) {
        console.log('ğŸ—‘ï¸ å¤ã„ç”»åƒã‚’å‰Šé™¤ä¸­:', formData.image);
        await deleteFileFromUrl(formData.image);
      }

      // æ–°ã—ã„ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
      const imageUrl = await uploadImage(file, 'PUBLIC');
      if (imageUrl) {
        console.log('âœ… æ–°ã—ã„ç”»åƒã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰:', imageUrl);
        setFormData((prev) => ({ ...prev, image: imageUrl }));
      } else {
        throw new Error('ç”»åƒURLã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
      }
    } catch (error) {
      console.error('ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¤±æ•—:', error);
      alert('ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ');
    } finally {
      setIsUploading(false);
    }
  };

  // ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
  const isBasicFormValid = () => {
    return (
      formData.name.trim() !== '' &&
      formData.description.trim() !== '' &&
      formData.image !== ''
    );
  };

  // ãƒ•ãƒ©ã‚°NFTãƒªã‚¹ãƒˆã‚’Supabaseã‹ã‚‰å–å¾—
  useEffect(() => {
    const loadFlagNFTs = async () => {
      if (!adminSupabase || !tenantId) {
        setIsLoading(false);
        return;
      }

      setIsLoading(true);
      try {
        const { data, error } = await adminSupabase
          .from('flag_nfts')
          .select('*')
          .eq('tenant_id', tenantId)
          .eq('is_active', true)
          .order('created_at', { ascending: false });

        if (error) {
          console.error('ãƒ•ãƒ©ã‚°NFTå–å¾—ã‚¨ãƒ©ãƒ¼:', error);
          setFlagNFTs([]);
        } else {
          setFlagNFTs(data || []);
        }
      } catch (err) {
        console.error('äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼:', err);
        setFlagNFTs([]);
      } finally {
        setIsLoading(false);
      }
    };

    loadFlagNFTs();
  }, [tenantId, adminSupabase, refreshTrigger]);

  // ãƒ•ãƒ©ã‚°NFTã‚’Supabaseã«ä¿å­˜ã™ã‚‹é–¢æ•°
  const saveFlagNFT = async (categoryConfig: any) => {
    if (!adminSupabase) {
      alert('ç®¡ç†è€…Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“');
      return;
    }

    if (!tenantId) {
      alert('ãƒ†ãƒŠãƒ³ãƒˆIDãŒå–å¾—ã§ãã¾ã›ã‚“');
      return;
    }

    if (!selectedCategory) {
      alert('ã‚«ãƒ†ã‚´ãƒªãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“');
      return;
    }

    setIsSaving(true);

    try {
      console.log('ğŸ’¾ FlagNFTä½œæˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼é–‹å§‹:', {
        category: selectedCategory,
        name: formData.name,
      });

      // ã‚¬ã‚¹ä»£æ¨å®šã‚’è¡¨ç¤º
      const gasCost = estimateGasCost('configure');
      console.log('â›½ æ¨å®šã‚¬ã‚¹ä»£:', gasCost);

      // ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œ
      const result = await executeSaveFlagNFTWorkflow({
        tenantId,
        category: selectedCategory,
        name: formData.name,
        description: formData.description,
        image: formData.image,
        categoryConfig: {
          ...categoryConfig,
          // formDataã‹ã‚‰åŸºæœ¬è¨­å®šã‚‚å«ã‚ã‚‹
          maxSupply: formData.maxSupply ? parseInt(formData.maxSupply) : null,
          autoDistribute: formData.autoDistributionEnabled,
          requiredTipAmount: formData.requiredTipAmount ? parseFloat(formData.requiredTipAmount) : null,
          targetToken: formData.targetToken,
          isBurnable: formData.isBurnable,
        },
        supabaseClient: adminSupabase,
        configureCategory: async (cat, usageLimit, validFrom, validUntil, isTransferable, metadataURI) => {
          return await configureCategory(cat, usageLimit, validFrom, validUntil, isTransferable, metadataURI);
        },
      });

      if (result.success) {
        const successMsg = getSuccessMessage('configure', selectedCategory);
        alert(`${successMsg}\n\nãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒƒã‚·ãƒ¥: ${result.transactionHash}`);

        // ãƒªã‚¹ãƒˆãƒ“ãƒ¥ãƒ¼ã«æˆ»ã£ã¦ãƒªãƒ­ãƒ¼ãƒ‰
        setView('list');
        loadFlagNFTs(); // æ—¢å­˜ã®ãƒ­ãƒ¼ãƒ‰é–¢æ•°ã‚’å‘¼ã¶
      } else {
        alert(`ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ:\n${result.error}`);
      }

    } catch (err: any) {
      console.error('âŒ äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼:', err);
      alert(`ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: ${err.message || err}`);
    } finally {
      setIsSaving(false);
    }
  };

  // æ‰‹å‹•ãƒŸãƒ³ãƒˆå‡¦ç†
  const handleManualMint = async () => {
    if (!selectedNFTForMint || !mintToAddress) {
      alert('ãƒŸãƒ³ãƒˆå…ˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
      return;
    }

    setIsMinting(true);
    try {
      // 1. ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã§NFTã‚’ãƒŸãƒ³ãƒˆ
      console.log('ğŸ¨ NFTãƒŸãƒ³ãƒˆé–‹å§‹:', {
        category: selectedNFTForMint.category,
        toAddress: mintToAddress,
      });

      const tx = await mintNFT(mintToAddress, selectedNFTForMint.category);
      console.log('âœ… NFTãƒŸãƒ³ãƒˆæˆåŠŸ:', tx);

      // 2. é…å¸ƒå±¥æ­´ã‚’Supabaseã«ä¿å­˜
      if (adminSupabase) {
        const { error: historyError } = await adminSupabase
          .from('flag_nft_distributions')
          .insert({
            flag_nft_id: selectedNFTForMint.id,
            user_address: mintToAddress,
            distribution_type: 'MANUAL',
            distributed_at: new Date().toISOString(),
          });

        if (historyError) {
          console.error('é…å¸ƒå±¥æ­´ä¿å­˜ã‚¨ãƒ©ãƒ¼:', historyError);
        }

        // 3. total_mintedã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ
        const { error: updateError } = await adminSupabase
          .from('flag_nfts')
          .update({
            total_minted: (selectedNFTForMint.total_minted || 0) + 1
          })
          .eq('id', selectedNFTForMint.id);

        if (updateError) {
          console.error('ç™ºè¡Œæ•°æ›´æ–°ã‚¨ãƒ©ãƒ¼:', updateError);
        }
      }

      alert(`âœ… NFTã‚’ãƒŸãƒ³ãƒˆã—ã¾ã—ãŸï¼\nã‚¢ãƒ‰ãƒ¬ã‚¹: ${mintToAddress.slice(0, 6)}...${mintToAddress.slice(-4)}`);

      // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã¦ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥
      setShowMintModal(false);
      setMintToAddress('');
      setSelectedNFTForMint(null);
      setRefreshTrigger(prev => prev + 1);
    } catch (error) {
      console.error('âŒ ãƒŸãƒ³ãƒˆã‚¨ãƒ©ãƒ¼:', error);
      alert(`ãƒŸãƒ³ãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ: ${error}`);
    } finally {
      setIsMinting(false);
    }
  };

  // ãƒªã‚¹ãƒˆè¡¨ç¤º
  if (view === 'list') {
    // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å‡¦ç†
    const filteredNFTs = categoryFilter === 'ALL'
      ? flagNFTs
      : flagNFTs.filter(nft => nft.category === categoryFilter);

    return (
      <div style={{ padding: 24 }}>
        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
        <div style={{
          display: 'flex',
          justifyContent: 'space-between',
          alignItems: 'center',
          marginBottom: 32,
        }}>
          <div>
            <h1 style={{ fontSize: 28, fontWeight: 700, color: '#fff', margin: 0 }}>
              ãƒ•ãƒ©ã‚°NFTç®¡ç†
            </h1>
            <p style={{ fontSize: 14, color: 'rgba(255,255,255,0.7)', margin: '8px 0 0 0' }}>
              ç‰¹å…¸NFTã€ã‚¹ã‚¿ãƒ³ãƒ—ãƒ©ãƒªãƒ¼ã€ä¼šå“¡è¨¼ãªã©ã‚’ä½œæˆãƒ»ç®¡ç†
            </p>
          </div>
          <button
            onClick={() => {
              setView('create');
              setCreateStep('category');
              setSelectedCategory(null);
            }}
            style={{
              padding: '12px 24px',
              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
              border: 'none',
              borderRadius: 8,
              color: '#fff',
              fontSize: 15,
              fontWeight: 600,
              cursor: 'pointer',
              display: 'flex',
              alignItems: 'center',
              gap: 8,
              boxShadow: '0 4px 12px rgba(102, 126, 234, 0.4)',
            }}
          >
            <span style={{ fontSize: 18 }}>â•</span>
            æ–°è¦ä½œæˆ
          </button>
        </div>

        {/* ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */}
        <div style={{
          display: 'flex',
          gap: 8,
          marginBottom: 24,
          flexWrap: 'wrap',
        }}>
          <button
            onClick={() => setCategoryFilter('ALL')}
            style={{
              padding: '8px 16px',
              background: categoryFilter === 'ALL' ? 'rgba(255,255,255,0.1)' : 'rgba(255,255,255,0.05)',
              border: categoryFilter === 'ALL' ? '2px solid rgba(255,255,255,0.2)' : '1px solid rgba(255,255,255,0.1)',
              borderRadius: 6,
              color: categoryFilter === 'ALL' ? '#fff' : 'rgba(255,255,255,0.7)',
              fontSize: 14,
              fontWeight: categoryFilter === 'ALL' ? 600 : 500,
              cursor: 'pointer',
            }}
          >
            å…¨ã¦
          </button>
          {CATEGORY_OPTIONS.map((cat) => (
            <button
              key={cat.id}
              onClick={() => setCategoryFilter(cat.id)}
              style={{
                padding: '8px 16px',
                background: categoryFilter === cat.id ? 'rgba(255,255,255,0.1)' : 'rgba(255,255,255,0.05)',
                border: categoryFilter === cat.id ? '2px solid rgba(255,255,255,0.2)' : '1px solid rgba(255,255,255,0.1)',
                borderRadius: 6,
                color: categoryFilter === cat.id ? '#fff' : 'rgba(255,255,255,0.7)',
                fontSize: 14,
                fontWeight: categoryFilter === cat.id ? 600 : 500,
                cursor: 'pointer',
                display: 'flex',
                alignItems: 'center',
                gap: 6,
              }}
            >
              <span>{cat.icon}</span>
              <span>{cat.label}</span>
            </button>
          ))}
        </div>

        {/* NFTãƒªã‚¹ãƒˆ */}
        {isLoading ? (
          <div style={{ textAlign: 'center', padding: 48, color: 'rgba(255,255,255,0.7)' }}>
            èª­ã¿è¾¼ã¿ä¸­...
          </div>
        ) : filteredNFTs.length === 0 ? (
          <div style={{
            background: 'rgba(255,255,255,0.05)',
            borderRadius: 12,
            padding: 48,
            textAlign: 'center',
            border: '2px dashed rgba(255,255,255,0.2)',
          }}>
            <div style={{ fontSize: 48, marginBottom: 16 }}>ğŸš©</div>
            <p style={{ fontSize: 16, color: 'rgba(255,255,255,0.7)', margin: 0 }}>
              {categoryFilter === 'ALL'
                ? 'ã¾ã ãƒ•ãƒ©ã‚°NFTãŒä½œæˆã•ã‚Œã¦ã„ã¾ã›ã‚“'
                : `${CATEGORY_OPTIONS.find(c => c.id === categoryFilter)?.label}ãŒã‚ã‚Šã¾ã›ã‚“`
              }
            </p>
            <p style={{ fontSize: 14, color: 'rgba(255,255,255,0.5)', margin: '8px 0 24px 0' }}>
              ã€Œæ–°è¦ä½œæˆã€ãƒœã‚¿ãƒ³ã‹ã‚‰æœ€åˆã®ãƒ•ãƒ©ã‚°NFTã‚’ä½œæˆã—ã¾ã—ã‚‡ã†
            </p>
          </div>
        ) : (
          <div style={{
            display: 'grid',
            gridTemplateColumns: 'repeat(auto-fill, minmax(320px, 1fr))',
            gap: 16,
          }}>
            {filteredNFTs.map((nft) => {
              const categoryInfo = CATEGORY_OPTIONS.find(c => c.id === nft.category);
              return (
                <div
                  key={nft.id}
                  style={{
                    background: 'rgba(255,255,255,0.05)',
                    border: '1px solid rgba(255,255,255,0.1)',
                    borderRadius: 12,
                    overflow: 'hidden',
                    transition: 'all 0.3s',
                  }}
                >
                  {/* NFTç”»åƒ */}
                  <div style={{
                    width: '100%',
                    height: 200,
                    backgroundImage: `url(${nft.image})`,
                    backgroundSize: 'cover',
                    backgroundPosition: 'center',
                    position: 'relative',
                  }}>
                    <div style={{
                      position: 'absolute',
                      top: 12,
                      left: 12,
                      padding: '6px 12px',
                      background: categoryInfo?.color || '#666',
                      borderRadius: 6,
                      fontSize: 12,
                      fontWeight: 600,
                      color: '#fff',
                      display: 'flex',
                      alignItems: 'center',
                      gap: 6,
                    }}>
                      <span>{categoryInfo?.icon}</span>
                      <span>{categoryInfo?.label}</span>
                    </div>
                  </div>

                  {/* NFTæƒ…å ± */}
                  <div style={{ padding: 16 }}>
                    <h3 style={{ fontSize: 18, fontWeight: 700, color: '#fff', margin: '0 0 8px 0' }}>
                      {nft.name}
                    </h3>
                    <p style={{ fontSize: 13, color: 'rgba(255,255,255,0.6)', margin: '0 0 16px 0', lineHeight: 1.5 }}>
                      {nft.description.length > 80
                        ? nft.description.substring(0, 80) + '...'
                        : nft.description
                      }
                    </p>

                    {/* çµ±è¨ˆæƒ…å ± */}
                    <div style={{
                      display: 'flex',
                      gap: 16,
                      marginBottom: 16,
                      fontSize: 12,
                      color: 'rgba(255,255,255,0.7)',
                    }}>
                      <div>
                        <span style={{ opacity: 0.6 }}>ç™ºè¡Œæ•°: </span>
                        <span style={{ fontWeight: 600 }}>{nft.total_minted || 0}</span>
                        {nft.max_supply && <span style={{ opacity: 0.6 }}> / {nft.max_supply}</span>}
                      </div>
                      <div>
                        <span style={{ opacity: 0.6 }}>ä½¿ç”¨å›æ•°: </span>
                        <span style={{ fontWeight: 600 }}>{nft.total_used || 0}</span>
                      </div>
                    </div>

                    {/* ãƒŸãƒ³ãƒˆãƒœã‚¿ãƒ³ */}
                    <button
                      onClick={() => {
                        setSelectedNFTForMint(nft);
                        setShowMintModal(true);
                      }}
                      style={{
                        width: '100%',
                        padding: '10px 16px',
                        background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                        border: 'none',
                        borderRadius: 8,
                        color: '#fff',
                        fontSize: 14,
                        fontWeight: 600,
                        cursor: 'pointer',
                        transition: 'all 0.3s',
                      }}
                    >
                      ğŸ¨ æ‰‹å‹•ãƒŸãƒ³ãƒˆ
                    </button>
                  </div>
                </div>
              );
            })}
          </div>
        )}

        {/* ãƒŸãƒ³ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ« */}
        {showMintModal && selectedNFTForMint && (
          <div style={{
            position: 'fixed',
            top: 0,
            left: 0,
            right: 0,
            bottom: 0,
            background: 'rgba(0,0,0,0.8)',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
            zIndex: 9999,
          }}>
            <div style={{
              background: '#1a1a2e',
              borderRadius: 16,
              padding: 32,
              maxWidth: 500,
              width: '90%',
              maxHeight: '90vh',
              overflow: 'auto',
            }}>
              <h2 style={{ fontSize: 24, fontWeight: 700, color: '#fff', margin: '0 0 8px 0' }}>
                NFTã‚’æ‰‹å‹•ãƒŸãƒ³ãƒˆ
              </h2>
              <p style={{ fontSize: 14, color: 'rgba(255,255,255,0.6)', margin: '0 0 24px 0' }}>
                {selectedNFTForMint.name}
              </p>

              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  ãƒŸãƒ³ãƒˆå…ˆã‚¢ãƒ‰ãƒ¬ã‚¹
                </label>
                <input
                  type="text"
                  value={mintToAddress}
                  onChange={(e) => setMintToAddress(e.target.value)}
                  placeholder="0x..."
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.05)',
                    border: '1px solid rgba(255,255,255,0.1)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 14,
                  }}
                />
              </div>

              <div style={{ display: 'flex', gap: 12 }}>
                <button
                  onClick={() => {
                    setShowMintModal(false);
                    setMintToAddress('');
                    setSelectedNFTForMint(null);
                  }}
                  style={{
                    flex: 1,
                    padding: '12px 24px',
                    background: 'rgba(255,255,255,0.1)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: 'pointer',
                  }}
                >
                  ã‚­ãƒ£ãƒ³ã‚»ãƒ«
                </button>
                <button
                  onClick={handleManualMint}
                  disabled={isMinting || !mintToAddress}
                  style={{
                    flex: 1,
                    padding: '12px 24px',
                    background: isMinting || !mintToAddress
                      ? 'rgba(102, 126, 234, 0.3)'
                      : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: isMinting || !mintToAddress ? 'not-allowed' : 'pointer',
                    opacity: isMinting || !mintToAddress ? 0.6 : 1,
                  }}
                >
                  {isMinting ? 'ãƒŸãƒ³ãƒˆä¸­...' : 'ãƒŸãƒ³ãƒˆå®Ÿè¡Œ'}
                </button>
              </div>
            </div>
          </div>
        )}
      </div>
    );
  }

  // ä½œæˆãƒ•ãƒ­ãƒ¼
  return (
    <div style={{ padding: 24 }}>
      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
      <div style={{ marginBottom: 32 }}>
        <button
          onClick={() => setView('list')}
          style={{
            padding: '8px 16px',
            background: 'rgba(255,255,255,0.1)',
            border: 'none',
            borderRadius: 6,
            color: '#fff',
            fontSize: 14,
            fontWeight: 600,
            cursor: 'pointer',
            marginBottom: 16,
            display: 'flex',
            alignItems: 'center',
            gap: 6,
          }}
        >
          â† æˆ»ã‚‹
        </button>
        <h1 style={{ fontSize: 28, fontWeight: 700, color: '#fff', margin: 0 }}>
          æ–°è¦ãƒ•ãƒ©ã‚°NFTä½œæˆ
        </h1>
      </div>

      {/* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */}
      <div style={{
        display: 'flex',
        gap: 16,
        marginBottom: 32,
        maxWidth: 600,
      }}>
        <div style={{ flex: 1 }}>
          <div style={{
            height: 4,
            background: createStep === 'category' ? '#667eea' : 'rgba(255,255,255,0.1)',
            borderRadius: 2,
          }} />
          <p style={{
            fontSize: 12,
            color: createStep === 'category' ? '#fff' : 'rgba(255,255,255,0.5)',
            marginTop: 8,
            fontWeight: 600,
          }}>
            1. ã‚«ãƒ†ã‚´ãƒªé¸æŠ
          </p>
        </div>
        <div style={{ flex: 1 }}>
          <div style={{
            height: 4,
            background: createStep === 'basic' ? '#667eea' : 'rgba(255,255,255,0.1)',
            borderRadius: 2,
          }} />
          <p style={{
            fontSize: 12,
            color: createStep === 'basic' ? '#fff' : 'rgba(255,255,255,0.5)',
            marginTop: 8,
            fontWeight: 600,
          }}>
            2. åŸºæœ¬æƒ…å ±
          </p>
        </div>
        <div style={{ flex: 1 }}>
          <div style={{
            height: 4,
            background: createStep === 'detail' ? '#667eea' : 'rgba(255,255,255,0.1)',
            borderRadius: 2,
          }} />
          <p style={{
            fontSize: 12,
            color: createStep === 'detail' ? '#fff' : 'rgba(255,255,255,0.5)',
            marginTop: 8,
            fontWeight: 600,
          }}>
            3. è©³ç´°è¨­å®š
          </p>
        </div>
      </div>

      {/* ã‚¹ãƒ†ãƒƒãƒ—1: ã‚«ãƒ†ã‚´ãƒªé¸æŠ */}
      {createStep === 'category' && (
        <div>
          <h2 style={{ fontSize: 20, fontWeight: 700, color: '#fff', marginBottom: 16 }}>
            ã©ã®ã‚ˆã†ãªç”¨é€”ã§NFTã‚’ç™ºè¡Œã—ã¾ã™ã‹?
          </h2>
          <div style={{
            display: 'grid',
            gridTemplateColumns: 'repeat(auto-fit, minmax(280px, 1fr))',
            gap: 16,
            maxWidth: 1200,
          }}>
            {CATEGORY_OPTIONS.map((category) => (
              <button
                key={category.id}
                onClick={() => {
                  setSelectedCategory(category.id);
                  setCreateStep('basic');
                }}
                style={{
                  padding: 24,
                  background: 'rgba(255,255,255,0.05)',
                  border: '2px solid rgba(255,255,255,0.1)',
                  borderRadius: 12,
                  cursor: 'pointer',
                  textAlign: 'left',
                  transition: 'all 0.2s ease',
                }}
                onMouseEnter={(e) => {
                  e.currentTarget.style.background = 'rgba(255,255,255,0.1)';
                  e.currentTarget.style.borderColor = category.color;
                  e.currentTarget.style.transform = 'translateY(-4px)';
                }}
                onMouseLeave={(e) => {
                  e.currentTarget.style.background = 'rgba(255,255,255,0.05)';
                  e.currentTarget.style.borderColor = 'rgba(255,255,255,0.1)';
                  e.currentTarget.style.transform = 'translateY(0)';
                }}
              >
                <div style={{
                  fontSize: 40,
                  marginBottom: 12,
                }}>
                  {category.icon}
                </div>
                <h3 style={{
                  fontSize: 18,
                  fontWeight: 700,
                  color: '#fff',
                  margin: '0 0 8px 0',
                }}>
                  {category.label}
                </h3>
                <p style={{
                  fontSize: 14,
                  color: 'rgba(255,255,255,0.6)',
                  margin: 0,
                  lineHeight: 1.6,
                }}>
                  {category.description}
                </p>
              </button>
            ))}
          </div>
        </div>
      )}

      {/* ã‚¹ãƒ†ãƒƒãƒ—2: åŸºæœ¬æƒ…å ± */}
      {createStep === 'basic' && selectedCategory && (
        <div style={{ maxWidth: 800 }}>
          <h2 style={{ fontSize: 20, fontWeight: 700, color: '#fff', marginBottom: 24 }}>
            åŸºæœ¬æƒ…å ±ã‚’å…¥åŠ›
          </h2>
          <div style={{
            background: 'rgba(255,255,255,0.05)',
            borderRadius: 12,
            padding: 32,
            border: '1px solid rgba(255,255,255,0.1)',
          }}>
            {/* NFTå */}
            <div style={{ marginBottom: 24 }}>
              <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                NFTå <span style={{ color: '#ef4444' }}>*</span>
              </label>
              <input
                type="text"
                value={formData.name}
                onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}
                placeholder="ä¾‹: 10%å‰²å¼•ç‰¹å…¸NFT"
                style={{
                  width: '100%',
                  padding: '12px 16px',
                  background: 'rgba(255,255,255,0.1)',
                  border: '1px solid rgba(255,255,255,0.2)',
                  borderRadius: 8,
                  color: '#fff',
                  fontSize: 15,
                  outline: 'none',
                }}
              />
            </div>

            {/* èª¬æ˜ */}
            <div style={{ marginBottom: 24 }}>
              <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                èª¬æ˜ <span style={{ color: '#ef4444' }}>*</span>
              </label>
              <textarea
                value={formData.description}
                onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}
                placeholder="NFTã®ç”¨é€”ã‚„ç‰¹å…¸å†…å®¹ã‚’èª¬æ˜ã—ã¦ãã ã•ã„"
                rows={4}
                style={{
                  width: '100%',
                  padding: '12px 16px',
                  background: 'rgba(255,255,255,0.1)',
                  border: '1px solid rgba(255,255,255,0.2)',
                  borderRadius: 8,
                  color: '#fff',
                  fontSize: 15,
                  outline: 'none',
                  resize: 'vertical',
                }}
              />
            </div>

            {/* ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ */}
            <div style={{ marginBottom: 24 }}>
              <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                NFTç”»åƒ <span style={{ color: '#ef4444' }}>*</span>
              </label>
              <div style={{ display: 'flex', gap: 16, alignItems: 'center' }}>
                {formData.image && (
                  <img
                    src={formData.image}
                    alt="NFT preview"
                    style={{
                      width: 120,
                      height: 120,
                      objectFit: 'cover',
                      borderRadius: 8,
                      border: '2px solid rgba(255,255,255,0.2)',
                    }}
                  />
                )}
                <div style={{ flex: 1 }}>
                  <input
                    ref={fileInputRef}
                    type="file"
                    accept="image/*"
                    onChange={handleImageUpload}
                    style={{ display: 'none' }}
                  />
                  <button
                    onClick={() => fileInputRef.current?.click()}
                    disabled={isUploading}
                    style={{
                      padding: '12px 24px',
                      background: 'rgba(255,255,255,0.1)',
                      border: '1px solid rgba(255,255,255,0.2)',
                      borderRadius: 8,
                      color: '#fff',
                      fontSize: 14,
                      fontWeight: 600,
                      cursor: isUploading ? 'not-allowed' : 'pointer',
                      opacity: isUploading ? 0.6 : 1,
                    }}
                  >
                    {isUploading ? 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...' : formData.image ? 'ç”»åƒã‚’å¤‰æ›´' : 'ç”»åƒã‚’é¸æŠ'}
                  </button>
                  <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 8 }}>
                    æ¨å¥¨: æ­£æ–¹å½¢ã€1MBä»¥ä¸‹
                  </p>
                </div>
              </div>
            </div>

            {/* æœ‰åŠ¹æœŸé–“ */}
            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 16, marginBottom: 24 }}>
              <div>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  æœ‰åŠ¹é–‹å§‹æ—¥
                </label>
                <input
                  type="date"
                  value={formData.validFrom}
                  onChange={(e) => setFormData(prev => ({ ...prev, validFrom: e.target.value }))}
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                />
              </div>
              <div>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  æœ‰åŠ¹çµ‚äº†æ—¥ï¼ˆç„¡æœŸé™ã®å ´åˆã¯ç©ºæ¬„ï¼‰
                </label>
                <input
                  type="date"
                  value={formData.validUntil}
                  onChange={(e) => setFormData(prev => ({ ...prev, validUntil: e.target.value }))}
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                />
              </div>
            </div>

            {/* ä½¿ç”¨åˆ¶é™ãƒ»ç™ºè¡Œä¸Šé™ */}
            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 16, marginBottom: 24 }}>
              <div>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  ä½¿ç”¨åˆ¶é™å›æ•°
                </label>
                <select
                  value={formData.usageLimit}
                  onChange={(e) => setFormData(prev => ({ ...prev, usageLimit: e.target.value }))}
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                >
                  <option value="-1" style={{ background: '#1a1a1a' }}>ç„¡åˆ¶é™</option>
                  <option value="0" style={{ background: '#1a1a1a' }}>è¡¨ç¤ºã®ã¿ï¼ˆä½¿ç”¨ä¸å¯ï¼‰</option>
                  <option value="1" style={{ background: '#1a1a1a' }}>1å›ã¾ã§</option>
                  <option value="3" style={{ background: '#1a1a1a' }}>3å›ã¾ã§</option>
                  <option value="5" style={{ background: '#1a1a1a' }}>5å›ã¾ã§</option>
                  <option value="10" style={{ background: '#1a1a1a' }}>10å›ã¾ã§</option>
                </select>
              </div>
              <div>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  ç™ºè¡Œä¸Šé™æ•°ï¼ˆç„¡åˆ¶é™ã®å ´åˆã¯ç©ºæ¬„ï¼‰
                </label>
                <input
                  type="number"
                  value={formData.maxSupply}
                  onChange={(e) => setFormData(prev => ({ ...prev, maxSupply: e.target.value }))}
                  placeholder="ä¾‹: 100"
                  min="1"
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                />
              </div>
            </div>

            {/* è­²æ¸¡å¯èƒ½è¨­å®š */}
            <div style={{ marginBottom: 32 }}>
              <label style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }}>
                <input
                  type="checkbox"
                  checked={formData.isTransferable}
                  onChange={(e) => setFormData(prev => ({ ...prev, isTransferable: e.target.checked }))}
                  style={{ marginRight: 8, width: 18, height: 18, cursor: 'pointer' }}
                />
                <span style={{ fontSize: 14, fontWeight: 600, color: '#fff' }}>
                  NFTã®è­²æ¸¡ã‚’è¨±å¯ã™ã‚‹
                </span>
              </label>
              <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6, marginLeft: 26 }}>
                ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã‚‹ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã§NFTã®è­²æ¸¡ãŒå¯èƒ½ã«ãªã‚Šã¾ã™
              </p>
            </div>

            {/* ãƒãƒ¼ãƒ³æ©Ÿèƒ½è¨­å®š */}
            <div style={{ marginBottom: 32 }}>
              <label style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }}>
                <input
                  type="checkbox"
                  checked={formData.isBurnable}
                  onChange={(e) => setFormData(prev => ({ ...prev, isBurnable: e.target.checked }))}
                  style={{ marginRight: 8, width: 18, height: 18, cursor: 'pointer' }}
                />
                <span style={{ fontSize: 14, fontWeight: 600, color: '#fff' }}>
                  NFTã®ãƒãƒ¼ãƒ³ï¼ˆç„¼å´ï¼‰ã‚’è¨±å¯ã™ã‚‹
                </span>
              </label>
              <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6, marginLeft: 26 }}>
                ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã‚‹ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒNFTã‚’ãƒãƒ¼ãƒ³ï¼ˆå‰Šé™¤ï¼‰ã§ãã¾ã™ã€‚ã‚¯ãƒ¼ãƒãƒ³ä½¿ç”¨å¾Œã®å‡¦ç†ãªã©ã«ä½¿ç”¨
              </p>
            </div>

            {/* è‡ªå‹•é…å¸ƒè¨­å®š */}
            <div style={{ marginBottom: 32, padding: 20, background: 'rgba(255,255,255,0.05)', borderRadius: 12, border: '1px solid rgba(255,255,255,0.1)' }}>
              <label style={{ display: 'flex', alignItems: 'center', cursor: 'pointer', marginBottom: 16 }}>
                <input
                  type="checkbox"
                  checked={formData.autoDistributionEnabled}
                  onChange={(e) => setFormData(prev => ({ ...prev, autoDistributionEnabled: e.target.checked }))}
                  style={{ marginRight: 8, width: 18, height: 18, cursor: 'pointer' }}
                />
                <span style={{ fontSize: 14, fontWeight: 600, color: '#fff' }}>
                  æŠ•ã’éŠ­ç´¯ç©ã«ã‚ˆã‚‹è‡ªå‹•é…å¸ƒã‚’æœ‰åŠ¹åŒ–
                </span>
              </label>
              <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginBottom: 16, marginLeft: 26 }}>
                ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç´¯ç©æŠ•ã’éŠ­é¡ãŒæ¡ä»¶ã‚’é”æˆã—ãŸã¨ãã€è‡ªå‹•çš„ã«ã“ã®NFTã‚’é…å¸ƒã—ã¾ã™
              </p>

              {formData.autoDistributionEnabled && (
                <div style={{ marginLeft: 26 }}>
                  <div style={{ marginBottom: 16 }}>
                    <label style={{ fontSize: 13, fontWeight: 500, color: 'rgba(255,255,255,0.8)', display: 'block', marginBottom: 6 }}>
                      å¿…è¦ãªç´¯ç©é¡
                    </label>
                    <input
                      type="number"
                      value={formData.requiredTipAmount}
                      onChange={(e) => setFormData(prev => ({ ...prev, requiredTipAmount: e.target.value }))}
                      placeholder="ä¾‹: 1000"
                      style={{
                        width: '100%',
                        padding: '10px 12px',
                        background: 'rgba(255,255,255,0.05)',
                        border: '1px solid rgba(255,255,255,0.2)',
                        borderRadius: 8,
                        color: '#fff',
                        fontSize: 14,
                      }}
                    />
                    <p style={{ fontSize: 11, color: 'rgba(255,255,255,0.4)', marginTop: 4 }}>
                      ãƒˆãƒ¼ã‚¯ãƒ³å˜ä½ã§ã®ç´¯ç©é¡ï¼ˆJPYC: 1000 = 1000å††ç›¸å½“ï¼‰
                    </p>
                  </div>

                  <div>
                    <label style={{ fontSize: 13, fontWeight: 500, color: 'rgba(255,255,255,0.8)', display: 'block', marginBottom: 6 }}>
                      å¯¾è±¡ãƒˆãƒ¼ã‚¯ãƒ³
                    </label>
                    <select
                      value={formData.targetToken}
                      onChange={(e) => setFormData(prev => ({ ...prev, targetToken: e.target.value as 'JPYC' | 'tNHT' | 'both' }))}
                      style={{
                        width: '100%',
                        padding: '10px 12px',
                        background: 'rgba(255,255,255,0.05)',
                        border: '1px solid rgba(255,255,255,0.2)',
                        borderRadius: 8,
                        color: '#fff',
                        fontSize: 14,
                        cursor: 'pointer',
                      }}
                    >
                      <option value="both">JPYC + tNHTï¼ˆä¸¡æ–¹ï¼‰</option>
                      <option value="JPYC">JPYCã®ã¿</option>
                      <option value="tNHT">tNHTã®ã¿</option>
                    </select>
                    <p style={{ fontSize: 11, color: 'rgba(255,255,255,0.4)', marginTop: 4 }}>
                      ã©ã®ãƒˆãƒ¼ã‚¯ãƒ³ã®ç´¯ç©é¡ã‚’ã‚«ã‚¦ãƒ³ãƒˆã™ã‚‹ã‹
                    </p>
                  </div>
                </div>
              )}
            </div>

            {/* ãƒœã‚¿ãƒ³ */}
            <div style={{ display: 'flex', gap: 12 }}>
              <button
                onClick={() => setCreateStep('category')}
                style={{
                  padding: '12px 24px',
                  background: 'rgba(255,255,255,0.1)',
                  border: 'none',
                  borderRadius: 8,
                  color: '#fff',
                  fontSize: 15,
                  fontWeight: 600,
                  cursor: 'pointer',
                }}
              >
                â† æˆ»ã‚‹
              </button>
              <button
                onClick={() => setCreateStep('detail')}
                disabled={!isBasicFormValid()}
                style={{
                  padding: '12px 24px',
                  background: isBasicFormValid()
                    ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
                    : 'rgba(255,255,255,0.1)',
                  border: 'none',
                  borderRadius: 8,
                  color: '#fff',
                  fontSize: 15,
                  fontWeight: 600,
                  cursor: isBasicFormValid() ? 'pointer' : 'not-allowed',
                  opacity: isBasicFormValid() ? 1 : 0.5,
                }}
              >
                æ¬¡ã¸: è©³ç´°è¨­å®š â†’
              </button>
            </div>
          </div>
        </div>
      )}

      {/* ã‚¹ãƒ†ãƒƒãƒ—3: è©³ç´°è¨­å®š */}
      {createStep === 'detail' && selectedCategory && (
        <div style={{ maxWidth: 800 }}>
          <h2 style={{ fontSize: 20, fontWeight: 700, color: '#fff', marginBottom: 24 }}>
            è©³ç´°è¨­å®š - {CATEGORY_OPTIONS.find(c => c.id === selectedCategory)?.label}
          </h2>

          {/* ç‰¹å…¸NFTã®è©³ç´°è¨­å®š */}
          {selectedCategory === 'BENEFIT' && (
            <div style={{
              background: 'rgba(255,255,255,0.05)',
              borderRadius: 12,
              padding: 32,
              border: '1px solid rgba(255,255,255,0.1)',
            }}>
              {/* å‰²å¼•ã‚¿ã‚¤ãƒ— */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  å‰²å¼•ã‚¿ã‚¤ãƒ— <span style={{ color: '#ef4444' }}>*</span>
                </label>
                <select
                  value={benefitData.discountType}
                  onChange={(e) => setBenefitData(prev => ({ ...prev, discountType: e.target.value as any }))}
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                >
                  <option value="PERCENTAGE" style={{ background: '#1a1a1a' }}>ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆå‰²å¼• (ä¾‹: 10%ã‚ªãƒ•)</option>
                  <option value="FIXED_AMOUNT" style={{ background: '#1a1a1a' }}>å›ºå®šé¡å‰²å¼• (ä¾‹: 500å††ã‚ªãƒ•)</option>
                  <option value="GIFT_ITEM" style={{ background: '#1a1a1a' }}>ç‰¹å…¸ã‚¢ã‚¤ãƒ†ãƒ  (ä¾‹: ãƒ‰ãƒªãƒ³ã‚¯1æ¯ç„¡æ–™)</option>
                </select>
              </div>

              {/* å‰²å¼•å€¤ */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  {benefitData.discountType === 'PERCENTAGE' ? 'å‰²å¼•ç‡ (%)' : benefitData.discountType === 'FIXED_AMOUNT' ? 'å‰²å¼•é¡ (å††)' : 'ç‰¹å…¸å†…å®¹'} <span style={{ color: '#ef4444' }}>*</span>
                </label>
                <input
                  type={benefitData.discountType === 'GIFT_ITEM' ? 'text' : 'number'}
                  value={benefitData.discountValue}
                  onChange={(e) => setBenefitData(prev => ({ ...prev, discountValue: e.target.value }))}
                  placeholder={benefitData.discountType === 'PERCENTAGE' ? 'ä¾‹: 10' : benefitData.discountType === 'FIXED_AMOUNT' ? 'ä¾‹: 500' : 'ä¾‹: ãƒ‰ãƒªãƒ³ã‚¯1æ¯ç„¡æ–™'}
                  min={benefitData.discountType !== 'GIFT_ITEM' ? '0' : undefined}
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                />
              </div>

              {/* æœ€ä½ãƒãƒƒãƒ—é¡ */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  æœ€ä½ãƒãƒƒãƒ—é¡ (å††)
                </label>
                <input
                  type="number"
                  value={benefitData.minTipAmount}
                  onChange={(e) => setBenefitData(prev => ({ ...prev, minTipAmount: e.target.value }))}
                  placeholder="ä¾‹: 1000 (ç©ºæ¬„ã®å ´åˆã¯åˆ¶é™ãªã—)"
                  min="0"
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                />
                <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6 }}>
                  ã“ã®é‡‘é¡ä»¥ä¸Šã®ãƒãƒƒãƒ—ã«å¯¾ã—ã¦ã®ã¿ç‰¹å…¸ãŒé©ç”¨ã•ã‚Œã¾ã™
                </p>
              </div>

              {/* æœ€å¤§å‰²å¼•é¡ (ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸å‰²å¼•ã®å ´åˆã®ã¿) */}
              {benefitData.discountType === 'PERCENTAGE' && (
                <div style={{ marginBottom: 24 }}>
                  <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                    æœ€å¤§å‰²å¼•é¡ (å††)
                  </label>
                  <input
                    type="number"
                    value={benefitData.maxDiscountAmount}
                    onChange={(e) => setBenefitData(prev => ({ ...prev, maxDiscountAmount: e.target.value }))}
                    placeholder="ä¾‹: 5000 (ç©ºæ¬„ã®å ´åˆã¯ä¸Šé™ãªã—)"
                    min="0"
                    style={{
                      width: '100%',
                      padding: '12px 16px',
                      background: 'rgba(255,255,255,0.1)',
                      border: '1px solid rgba(255,255,255,0.2)',
                      borderRadius: 8,
                      color: '#fff',
                      fontSize: 15,
                      outline: 'none',
                    }}
                  />
                  <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6 }}>
                    ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆå‰²å¼•ã®ä¸Šé™é¡ã‚’è¨­å®šã—ã¾ã™
                  </p>
                </div>
              )}

              {/* é©ç”¨å¯¾è±¡ç‰¹å…¸ID */}
              <div style={{ marginBottom: 32 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  é©ç”¨å¯¾è±¡ç‰¹å…¸ID (ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š)
                </label>
                <input
                  type="text"
                  value={benefitData.applicableGifts}
                  onChange={(e) => setBenefitData(prev => ({ ...prev, applicableGifts: e.target.value }))}
                  placeholder="ä¾‹: gift-001,gift-002 (ç©ºæ¬„ã®å ´åˆã¯å…¨ç‰¹å…¸ã«é©ç”¨)"
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                    fontFamily: 'monospace',
                  }}
                />
                <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6 }}>
                  ç‰¹å®šã®ç‰¹å…¸ã«ã®ã¿é©ç”¨ã—ãŸã„å ´åˆã¯ç‰¹å…¸IDã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
                </p>
              </div>

              {/* ãƒœã‚¿ãƒ³ */}
              <div style={{ display: 'flex', gap: 12 }}>
                <button
                  onClick={() => setCreateStep('basic')}
                  style={{
                    padding: '12px 24px',
                    background: 'rgba(255,255,255,0.1)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: 'pointer',
                  }}
                >
                  â† æˆ»ã‚‹
                </button>
                <button
                  onClick={saveFlagNFT}
                  disabled={isSaving || !benefitData.discountValue}
                  style={{
                    padding: '12px 24px',
                    background: (benefitData.discountValue && !isSaving)
                      ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)'
                      : 'rgba(255,255,255,0.1)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: (benefitData.discountValue && !isSaving) ? 'pointer' : 'not-allowed',
                    opacity: (benefitData.discountValue && !isSaving) ? 1 : 0.5,
                  }}
                >
                  {isSaving ? 'ä¿å­˜ä¸­...' : 'ä½œæˆã—ã¦å…¬é–‹'}
                </button>
              </div>
            </div>
          )}

          {/* ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³(ã‚¹ã‚¿ãƒ³ãƒ—ãƒ©ãƒªãƒ¼)NFTã®è©³ç´°è¨­å®š */}
          {selectedCategory === 'CAMPAIGN' && (
            <div style={{
              background: 'rgba(255,255,255,0.05)',
              borderRadius: 12,
              padding: 32,
              border: '1px solid rgba(255,255,255,0.1)',
            }}>
              {/* æ¤œè¨¼æ–¹æ³• */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  æ¤œè¨¼æ–¹æ³• <span style={{ color: '#ef4444' }}>*</span>
                </label>
                <select
                  value={stampRallyData.verificationMethod}
                  onChange={(e) => setStampRallyData(prev => ({ ...prev, verificationMethod: e.target.value as any }))}
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                >
                  <option value="NFC" style={{ background: '#1a1a1a' }}>NFCã‚¿ã‚°ã®ã¿</option>
                  <option value="QR" style={{ background: '#1a1a1a' }}>QRã‚³ãƒ¼ãƒ‰ã®ã¿</option>
                  <option value="BOTH" style={{ background: '#1a1a1a' }}>NFC + QRã‚³ãƒ¼ãƒ‰ä¸¡æ–¹</option>
                </select>
                <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6 }}>
                  NFCã¯ç‰©ç†çš„ãªã‚¿ã‚°ã‚¿ãƒƒãƒã€QRã¯ã‚«ãƒ¡ãƒ©ã§ã‚¹ã‚­ãƒ£ãƒ³ã€‚ä¸¡æ–¹ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨æŸ”è»Ÿãªé‹ç”¨ãŒå¯èƒ½ã§ã™
                </p>
              </div>

              {/* é †ç•ªæŒ‡å®š */}
              <div style={{ marginBottom: 24 }}>
                <label style={{
                  display: 'flex',
                  alignItems: 'center',
                  cursor: 'pointer',
                  fontSize: 14,
                  fontWeight: 600,
                  color: '#fff'
                }}>
                  <input
                    type="checkbox"
                    checked={stampRallyData.requireSequential}
                    onChange={(e) => setStampRallyData(prev => ({ ...prev, requireSequential: e.target.checked }))}
                    style={{ marginRight: 8, width: 18, height: 18, cursor: 'pointer' }}
                  />
                  é †ç•ªé€šã‚Šã«ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ã‚’è¦æ±‚ã™ã‚‹
                </label>
                <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6, marginLeft: 26 }}>
                  æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’é †ç•ªã«å›ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
                </p>
              </div>

              {/* å®Œèµ°ç‰¹å…¸NFT */}
              <div style={{ marginBottom: 32 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  å®Œèµ°ç‰¹å…¸NFT ID
                </label>
                <input
                  type="text"
                  value={stampRallyData.completionReward}
                  onChange={(e) => setStampRallyData(prev => ({ ...prev, completionReward: e.target.value }))}
                  placeholder="ä¾‹: benefit-nft-001 (ç©ºæ¬„ã®å ´åˆã¯ç‰¹å…¸ãªã—)"
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                />
                <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6 }}>
                  å…¨ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆé”æˆæ™‚ã«è‡ªå‹•é…å¸ƒã•ã‚Œã‚‹NFTã®ID
                </p>
              </div>

              {/* ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆç®¡ç† */}
              <div style={{ marginBottom: 24 }}>
                <div style={{
                  display: 'flex',
                  justifyContent: 'space-between',
                  alignItems: 'center',
                  marginBottom: 16
                }}>
                  <label style={{ fontSize: 14, fontWeight: 600, color: '#fff' }}>
                    ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ <span style={{ color: '#ef4444' }}>*</span>
                  </label>
                  <button
                    onClick={() => {
                      const newCheckpoint: CheckpointFormData = {
                        id: `checkpoint-${Date.now()}`,
                        name: '',
                        description: '',
                        nfcTagId: '',
                        nfcEnabled: stampRallyData.verificationMethod !== 'QR',
                        qrCode: '',
                        qrEnabled: stampRallyData.verificationMethod !== 'NFC',
                        locationLat: '',
                        locationLng: '',
                        radiusMeters: '100',
                      };
                      setStampRallyData(prev => ({
                        ...prev,
                        checkpoints: [...prev.checkpoints, newCheckpoint]
                      }));
                    }}
                    style={{
                      padding: '8px 16px',
                      background: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)',
                      border: 'none',
                      borderRadius: 6,
                      color: '#fff',
                      fontSize: 13,
                      fontWeight: 600,
                      cursor: 'pointer',
                    }}
                  >
                    + ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è¿½åŠ 
                  </button>
                </div>

                {/* ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆãƒªã‚¹ãƒˆ */}
                {stampRallyData.checkpoints.length === 0 ? (
                  <div style={{
                    padding: 32,
                    textAlign: 'center',
                    background: 'rgba(255,255,255,0.02)',
                    borderRadius: 8,
                    border: '1px dashed rgba(255,255,255,0.2)',
                  }}>
                    <p style={{ color: 'rgba(255,255,255,0.5)', fontSize: 14 }}>
                      ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆãŒã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚ã€Œ+ ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‹ã‚‰è¿½åŠ ã—ã¦ãã ã•ã„
                    </p>
                  </div>
                ) : (
                  <div style={{ display: 'flex', flexDirection: 'column', gap: 16 }}>
                    {stampRallyData.checkpoints.map((checkpoint, index) => (
                      <div
                        key={checkpoint.id}
                        style={{
                          background: 'rgba(255,255,255,0.03)',
                          borderRadius: 8,
                          padding: 20,
                          border: '1px solid rgba(255,255,255,0.15)',
                        }}
                      >
                        <div style={{
                          display: 'flex',
                          justifyContent: 'space-between',
                          alignItems: 'center',
                          marginBottom: 16
                        }}>
                          <h4 style={{
                            fontSize: 15,
                            fontWeight: 600,
                            color: '#fff',
                            margin: 0
                          }}>
                            ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ #{index + 1}
                          </h4>
                          <button
                            onClick={() => {
                              setStampRallyData(prev => ({
                                ...prev,
                                checkpoints: prev.checkpoints.filter((_, i) => i !== index)
                              }));
                            }}
                            style={{
                              padding: '6px 12px',
                              background: 'rgba(239,68,68,0.2)',
                              border: '1px solid rgba(239,68,68,0.3)',
                              borderRadius: 4,
                              color: '#ef4444',
                              fontSize: 12,
                              fontWeight: 600,
                              cursor: 'pointer',
                            }}
                          >
                            å‰Šé™¤
                          </button>
                        </div>

                        {/* ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆå */}
                        <div style={{ marginBottom: 12 }}>
                          <label style={{
                            display: 'block',
                            fontSize: 13,
                            fontWeight: 500,
                            color: 'rgba(255,255,255,0.9)',
                            marginBottom: 6
                          }}>
                            åå‰ <span style={{ color: '#ef4444' }}>*</span>
                          </label>
                          <input
                            type="text"
                            value={checkpoint.name}
                            onChange={(e) => {
                              const updated = [...stampRallyData.checkpoints];
                              updated[index] = { ...updated[index], name: e.target.value };
                              setStampRallyData(prev => ({ ...prev, checkpoints: updated }));
                            }}
                            placeholder="ä¾‹: ã‚¨ãƒ³ãƒˆãƒ©ãƒ³ã‚¹"
                            style={{
                              width: '100%',
                              padding: '10px 12px',
                              background: 'rgba(255,255,255,0.05)',
                              border: '1px solid rgba(255,255,255,0.15)',
                              borderRadius: 6,
                              color: '#fff',
                              fontSize: 14,
                              outline: 'none',
                            }}
                          />
                        </div>

                        {/* ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆèª¬æ˜ */}
                        <div style={{ marginBottom: 12 }}>
                          <label style={{
                            display: 'block',
                            fontSize: 13,
                            fontWeight: 500,
                            color: 'rgba(255,255,255,0.9)',
                            marginBottom: 6
                          }}>
                            èª¬æ˜
                          </label>
                          <textarea
                            value={checkpoint.description}
                            onChange={(e) => {
                              const updated = [...stampRallyData.checkpoints];
                              updated[index] = { ...updated[index], description: e.target.value };
                              setStampRallyData(prev => ({ ...prev, checkpoints: updated }));
                            }}
                            placeholder="ä¾‹: æ­£é¢ã‚¨ãƒ³ãƒˆãƒ©ãƒ³ã‚¹ã§ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æŠ¼ã—ã¦ãã ã•ã„"
                            rows={2}
                            style={{
                              width: '100%',
                              padding: '10px 12px',
                              background: 'rgba(255,255,255,0.05)',
                              border: '1px solid rgba(255,255,255,0.15)',
                              borderRadius: 6,
                              color: '#fff',
                              fontSize: 14,
                              outline: 'none',
                              resize: 'vertical',
                              fontFamily: 'inherit',
                            }}
                          />
                        </div>

                        {/* NFCã‚¿ã‚°ID (NFCãŒæœ‰åŠ¹ãªå ´åˆã®ã¿) */}
                        {checkpoint.nfcEnabled && (
                          <div style={{ marginBottom: 12 }}>
                            <label style={{
                              display: 'block',
                              fontSize: 13,
                              fontWeight: 500,
                              color: 'rgba(255,255,255,0.9)',
                              marginBottom: 6
                            }}>
                              NFCã‚¿ã‚°ID (UID)
                            </label>
                            <input
                              type="text"
                              value={checkpoint.nfcTagId}
                              onChange={(e) => {
                                const updated = [...stampRallyData.checkpoints];
                                updated[index] = { ...updated[index], nfcTagId: e.target.value };
                                setStampRallyData(prev => ({ ...prev, checkpoints: updated }));
                              }}
                              placeholder="ä¾‹: 04:1A:2B:3C:4D:5E:6F"
                              style={{
                                width: '100%',
                                padding: '10px 12px',
                                background: 'rgba(255,255,255,0.05)',
                                border: '1px solid rgba(255,255,255,0.15)',
                                borderRadius: 6,
                                color: '#fff',
                                fontSize: 14,
                                outline: 'none',
                                fontFamily: 'monospace',
                              }}
                            />
                            <p style={{ fontSize: 11, color: 'rgba(255,255,255,0.4)', marginTop: 4 }}>
                              ç‰©ç†NFCã‚¿ã‚°ã®ä¸€æ„è­˜åˆ¥å­
                            </p>
                          </div>
                        )}

                        {/* QRã‚³ãƒ¼ãƒ‰ (QRãŒæœ‰åŠ¹ãªå ´åˆã®ã¿) */}
                        {checkpoint.qrEnabled && (
                          <div style={{ marginBottom: 12 }}>
                            <label style={{
                              display: 'block',
                              fontSize: 13,
                              fontWeight: 500,
                              color: 'rgba(255,255,255,0.9)',
                              marginBottom: 6
                            }}>
                              QRã‚³ãƒ¼ãƒ‰å€¤
                            </label>
                            <input
                              type="text"
                              value={checkpoint.qrCode}
                              onChange={(e) => {
                                const updated = [...stampRallyData.checkpoints];
                                updated[index] = { ...updated[index], qrCode: e.target.value };
                                setStampRallyData(prev => ({ ...prev, checkpoints: updated }));
                              }}
                              placeholder="ä¾‹: checkpoint-entrance-001"
                              style={{
                                width: '100%',
                                padding: '10px 12px',
                                background: 'rgba(255,255,255,0.05)',
                                border: '1px solid rgba(255,255,255,0.15)',
                                borderRadius: 6,
                                color: '#fff',
                                fontSize: 14,
                                outline: 'none',
                                fontFamily: 'monospace',
                              }}
                            />
                            <p style={{ fontSize: 11, color: 'rgba(255,255,255,0.4)', marginTop: 4 }}>
                              QRã‚³ãƒ¼ãƒ‰ã«åŸ‹ã‚è¾¼ã‚€è­˜åˆ¥å­
                            </p>
                          </div>
                        )}

                        {/* ä½ç½®æƒ…å ± (ã‚ªãƒ—ã‚·ãƒ§ãƒ³) */}
                        <details style={{ marginTop: 12 }}>
                          <summary style={{
                            cursor: 'pointer',
                            fontSize: 13,
                            fontWeight: 500,
                            color: 'rgba(255,255,255,0.7)',
                            marginBottom: 8
                          }}>
                            ä½ç½®æƒ…å ±è¨­å®š (ã‚ªãƒ—ã‚·ãƒ§ãƒ³ - ä¸æ­£é˜²æ­¢ç”¨)
                          </summary>
                          <div style={{
                            display: 'grid',
                            gridTemplateColumns: '1fr 1fr 1fr',
                            gap: 8,
                            marginTop: 12
                          }}>
                            <div>
                              <label style={{
                                display: 'block',
                                fontSize: 12,
                                color: 'rgba(255,255,255,0.7)',
                                marginBottom: 4
                              }}>
                                ç·¯åº¦
                              </label>
                              <input
                                type="number"
                                step="0.000001"
                                value={checkpoint.locationLat}
                                onChange={(e) => {
                                  const updated = [...stampRallyData.checkpoints];
                                  updated[index] = { ...updated[index], locationLat: e.target.value };
                                  setStampRallyData(prev => ({ ...prev, checkpoints: updated }));
                                }}
                                placeholder="35.681236"
                                style={{
                                  width: '100%',
                                  padding: '8px',
                                  background: 'rgba(255,255,255,0.05)',
                                  border: '1px solid rgba(255,255,255,0.15)',
                                  borderRadius: 4,
                                  color: '#fff',
                                  fontSize: 13,
                                  outline: 'none',
                                }}
                              />
                            </div>
                            <div>
                              <label style={{
                                display: 'block',
                                fontSize: 12,
                                color: 'rgba(255,255,255,0.7)',
                                marginBottom: 4
                              }}>
                                çµŒåº¦
                              </label>
                              <input
                                type="number"
                                step="0.000001"
                                value={checkpoint.locationLng}
                                onChange={(e) => {
                                  const updated = [...stampRallyData.checkpoints];
                                  updated[index] = { ...updated[index], locationLng: e.target.value };
                                  setStampRallyData(prev => ({ ...prev, checkpoints: updated }));
                                }}
                                placeholder="139.767125"
                                style={{
                                  width: '100%',
                                  padding: '8px',
                                  background: 'rgba(255,255,255,0.05)',
                                  border: '1px solid rgba(255,255,255,0.15)',
                                  borderRadius: 4,
                                  color: '#fff',
                                  fontSize: 13,
                                  outline: 'none',
                                }}
                              />
                            </div>
                            <div>
                              <label style={{
                                display: 'block',
                                fontSize: 12,
                                color: 'rgba(255,255,255,0.7)',
                                marginBottom: 4
                              }}>
                                ç¯„å›²(m)
                              </label>
                              <input
                                type="number"
                                value={checkpoint.radiusMeters}
                                onChange={(e) => {
                                  const updated = [...stampRallyData.checkpoints];
                                  updated[index] = { ...updated[index], radiusMeters: e.target.value };
                                  setStampRallyData(prev => ({ ...prev, checkpoints: updated }));
                                }}
                                placeholder="100"
                                style={{
                                  width: '100%',
                                  padding: '8px',
                                  background: 'rgba(255,255,255,0.05)',
                                  border: '1px solid rgba(255,255,255,0.15)',
                                  borderRadius: 4,
                                  color: '#fff',
                                  fontSize: 13,
                                  outline: 'none',
                                }}
                              />
                            </div>
                          </div>
                          <p style={{ fontSize: 11, color: 'rgba(255,255,255,0.4)', marginTop: 6 }}>
                            ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³æ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½ç½®æƒ…å ±ã‚’ç¢ºèªã—ã€ç¯„å›²å†…ã‹ã©ã†ã‹ã‚’æ¤œè¨¼ã—ã¾ã™
                          </p>
                        </details>
                      </div>
                    ))}
                  </div>
                )}
              </div>

              {/* ãƒœã‚¿ãƒ³ */}
              <div style={{ display: 'flex', gap: 12 }}>
                <button
                  onClick={() => setCreateStep('basic')}
                  style={{
                    padding: '12px 24px',
                    background: 'rgba(255,255,255,0.1)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: 'pointer',
                  }}
                >
                  â† æˆ»ã‚‹
                </button>
                <button
                  onClick={() => {
                    alert('ä½œæˆå‡¦ç†ã¯æ¬¡ã®ã‚³ãƒŸãƒƒãƒˆã§å®Ÿè£…ã—ã¾ã™');
                    setView('list');
                  }}
                  disabled={stampRallyData.checkpoints.length === 0 || !stampRallyData.checkpoints.every(cp => cp.name.trim())}
                  style={{
                    padding: '12px 24px',
                    background: (stampRallyData.checkpoints.length > 0 && stampRallyData.checkpoints.every(cp => cp.name.trim()))
                      ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)'
                      : 'rgba(255,255,255,0.1)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: (stampRallyData.checkpoints.length > 0 && stampRallyData.checkpoints.every(cp => cp.name.trim())) ? 'pointer' : 'not-allowed',
                    opacity: (stampRallyData.checkpoints.length > 0 && stampRallyData.checkpoints.every(cp => cp.name.trim())) ? 1 : 0.5,
                  }}
                >
                  ä½œæˆã—ã¦å…¬é–‹
                </button>
              </div>
            </div>
          )}

          {/* ä¼šå“¡è¨¼NFTã®è©³ç´°è¨­å®š */}
          {selectedCategory === 'MEMBERSHIP' && (
            <div style={{
              background: 'rgba(255,255,255,0.05)',
              borderRadius: 12,
              padding: 32,
              border: '1px solid rgba(255,255,255,0.1)',
            }}>
              {/* ä¼šå“¡ãƒ¬ãƒ™ãƒ« */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  ä¼šå“¡ãƒ¬ãƒ™ãƒ« <span style={{ color: '#ef4444' }}>*</span>
                </label>
                <input
                  type="text"
                  value={membershipData.membershipLevel}
                  onChange={(e) => setMembershipData(prev => ({ ...prev, membershipLevel: e.target.value }))}
                  placeholder="ä¾‹: ã‚´ãƒ¼ãƒ«ãƒ‰"
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                />
              </div>

              {/* ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã‚¨ãƒªã‚¢ */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã‚¨ãƒªã‚¢ (ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š)
                </label>
                <input
                  type="text"
                  value={membershipData.accessAreas}
                  onChange={(e) => setMembershipData(prev => ({ ...prev, accessAreas: e.target.value }))}
                  placeholder="ä¾‹: VIPãƒ©ã‚¦ãƒ³ã‚¸,ç‰¹åˆ¥å±•ç¤ºå®¤,ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ã‚¤ãƒ™ãƒ³ãƒˆ"
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                />
                <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6 }}>
                  ã“ã®ä¼šå“¡è¨¼ã§å…¥å ´ã§ãã‚‹ã‚¨ãƒªã‚¢ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§æŒ‡å®šã—ã¾ã™
                </p>
              </div>

              {/* ç‰¹å…¸å†…å®¹ */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  ç‰¹å…¸å†…å®¹ (ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š)
                </label>
                <textarea
                  value={membershipData.benefits}
                  onChange={(e) => setMembershipData(prev => ({ ...prev, benefits: e.target.value }))}
                  placeholder="ä¾‹: 10%å‰²å¼•,å„ªå…ˆå…¥å ´,é™å®šã‚°ãƒƒã‚ºãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ"
                  rows={3}
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                    resize: 'vertical',
                  }}
                />
                <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6 }}>
                  ä¼šå“¡ãŒå—ã‘ã‚‰ã‚Œã‚‹ç‰¹å…¸ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§æŒ‡å®šã—ã¾ã™
                </p>
              </div>

              {/* æ›´æ–°ã‚¿ã‚¤ãƒ— */}
              <div style={{ marginBottom: 32 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  æ›´æ–°ã‚¿ã‚¤ãƒ—
                </label>
                <select
                  value={membershipData.renewalType}
                  onChange={(e) => setMembershipData(prev => ({ ...prev, renewalType: e.target.value as any }))}
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                >
                  <option value="NONE" style={{ background: '#1a1a1a' }}>æ›´æ–°ãªã—ï¼ˆæ°¸ç¶šï¼‰</option>
                  <option value="MANUAL" style={{ background: '#1a1a1a' }}>æ‰‹å‹•æ›´æ–°</option>
                  <option value="AUTO" style={{ background: '#1a1a1a' }}>è‡ªå‹•æ›´æ–°</option>
                </select>
              </div>

              {/* ãƒœã‚¿ãƒ³ */}
              <div style={{ display: 'flex', gap: 12 }}>
                <button
                  onClick={() => setCreateStep('basic')}
                  style={{
                    padding: '12px 24px',
                    background: 'rgba(255,255,255,0.1)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: 'pointer',
                  }}
                >
                  â† æˆ»ã‚‹
                </button>
                <button
                  onClick={() => {
                    alert('ä½œæˆå‡¦ç†ã¯æ¬¡ã®ã‚³ãƒŸãƒƒãƒˆã§å®Ÿè£…ã—ã¾ã™');
                    setView('list');
                  }}
                  disabled={!membershipData.membershipLevel}
                  style={{
                    padding: '12px 24px',
                    background: membershipData.membershipLevel
                      ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)'
                      : 'rgba(255,255,255,0.1)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: membershipData.membershipLevel ? 'pointer' : 'not-allowed',
                    opacity: membershipData.membershipLevel ? 1 : 0.5,
                  }}
                >
                  ä½œæˆã—ã¦å…¬é–‹
                </button>
              </div>
            </div>
          )}

          {/* å®Ÿç¸¾ãƒãƒƒã‚¸NFTã®è©³ç´°è¨­å®š */}
          {selectedCategory === 'ACHIEVEMENT' && (
            <div style={{
              background: 'rgba(255,255,255,0.05)',
              borderRadius: 12,
              padding: 32,
              border: '1px solid rgba(255,255,255,0.1)',
            }}>
              {/* ãƒˆãƒªã‚¬ãƒ¼ã‚¿ã‚¤ãƒ— */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  é”æˆæ¡ä»¶ã‚¿ã‚¤ãƒ— <span style={{ color: '#ef4444' }}>*</span>
                </label>
                <select
                  value={achievementData.triggerType}
                  onChange={(e) => setAchievementData(prev => ({ ...prev, triggerType: e.target.value as any }))}
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                >
                  <option value="TIP_COUNT" style={{ background: '#1a1a1a' }}>ãƒãƒƒãƒ—å›æ•°</option>
                  <option value="TOTAL_TIPPED" style={{ background: '#1a1a1a' }}>ç´¯è¨ˆãƒãƒƒãƒ—é¡</option>
                  <option value="GIFT_COLLECTION" style={{ background: '#1a1a1a' }}>ç‰¹å…¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³æ•°</option>
                  <option value="MANUAL" style={{ background: '#1a1a1a' }}>æ‰‹å‹•é…å¸ƒ</option>
                </select>
                <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6 }}>
                  ã©ã®æ¡ä»¶ã‚’é”æˆã—ãŸã¨ãã«ãƒãƒƒã‚¸ã‚’é…å¸ƒã™ã‚‹ã‹ã‚’é¸æŠã—ã¾ã™
                </p>
              </div>

              {/* é–¾å€¤ */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  é”æˆé–¾å€¤ {achievementData.triggerType !== 'MANUAL' && <span style={{ color: '#ef4444' }}>*</span>}
                </label>
                <input
                  type="number"
                  value={achievementData.threshold}
                  onChange={(e) => setAchievementData(prev => ({ ...prev, threshold: e.target.value }))}
                  placeholder={
                    achievementData.triggerType === 'TIP_COUNT' ? 'ä¾‹: 10 (10å›ãƒãƒƒãƒ—)' :
                    achievementData.triggerType === 'TOTAL_TIPPED' ? 'ä¾‹: 10000 (ç´¯è¨ˆ10,000å††)' :
                    achievementData.triggerType === 'GIFT_COLLECTION' ? 'ä¾‹: 5 (5å€‹ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³)' :
                    'æ‰‹å‹•é…å¸ƒã®å ´åˆã¯ä¸è¦'
                  }
                  disabled={achievementData.triggerType === 'MANUAL'}
                  min="1"
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: achievementData.triggerType === 'MANUAL' ? 'rgba(255,255,255,0.05)' : 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                    opacity: achievementData.triggerType === 'MANUAL' ? 0.5 : 1,
                  }}
                />
              </div>

              {/* è‡ªå‹•é…å¸ƒ */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'flex', alignItems: 'center', cursor: 'pointer' }}>
                  <input
                    type="checkbox"
                    checked={achievementData.autoDistribute}
                    onChange={(e) => setAchievementData(prev => ({ ...prev, autoDistribute: e.target.checked }))}
                    disabled={achievementData.triggerType === 'MANUAL'}
                    style={{ marginRight: 8, width: 18, height: 18, cursor: achievementData.triggerType === 'MANUAL' ? 'not-allowed' : 'pointer' }}
                  />
                  <span style={{ fontSize: 14, fontWeight: 600, color: '#fff' }}>
                    æ¡ä»¶é”æˆæ™‚ã«è‡ªå‹•é…å¸ƒã™ã‚‹
                  </span>
                </label>
                <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6, marginLeft: 26 }}>
                  æœ‰åŠ¹ã«ã™ã‚‹ã¨ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ¡ä»¶ã‚’é”æˆã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§è‡ªå‹•çš„ã«ãƒãƒƒã‚¸ãŒä»˜ä¸ã•ã‚Œã¾ã™
                </p>
              </div>

              {/* è¿½åŠ ç‰¹å…¸ */}
              <div style={{ marginBottom: 32 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  è¿½åŠ ç‰¹å…¸ (ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š)
                </label>
                <textarea
                  value={achievementData.additionalBenefits}
                  onChange={(e) => setAchievementData(prev => ({ ...prev, additionalBenefits: e.target.value }))}
                  placeholder="ä¾‹: é™å®šã‚°ãƒƒã‚º,æ¬¡å›10%å‰²å¼•,å„ªå…ˆäºˆç´„æ¨©"
                  rows={3}
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                    resize: 'vertical',
                  }}
                />
                <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6 }}>
                  ãƒãƒƒã‚¸å–å¾—è€…ã¸ã®è¿½åŠ ç‰¹å…¸ãŒã‚ã‚Œã°è¨˜è¼‰ã—ã¦ãã ã•ã„
                </p>
              </div>

              {/* ãƒœã‚¿ãƒ³ */}
              <div style={{ display: 'flex', gap: 12 }}>
                <button
                  onClick={() => setCreateStep('basic')}
                  style={{
                    padding: '12px 24px',
                    background: 'rgba(255,255,255,0.1)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: 'pointer',
                  }}
                >
                  â† æˆ»ã‚‹
                </button>
                <button
                  onClick={() => {
                    alert('ä½œæˆå‡¦ç†ã¯æ¬¡ã®ã‚³ãƒŸãƒƒãƒˆã§å®Ÿè£…ã—ã¾ã™');
                    setView('list');
                  }}
                  disabled={achievementData.triggerType !== 'MANUAL' && !achievementData.threshold}
                  style={{
                    padding: '12px 24px',
                    background: (achievementData.triggerType === 'MANUAL' || achievementData.threshold)
                      ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)'
                      : 'rgba(255,255,255,0.1)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: (achievementData.triggerType === 'MANUAL' || achievementData.threshold) ? 'pointer' : 'not-allowed',
                    opacity: (achievementData.triggerType === 'MANUAL' || achievementData.threshold) ? 1 : 0.5,
                  }}
                >
                  ä½œæˆã—ã¦å…¬é–‹
                </button>
              </div>
            </div>
          )}

          {/* ã‚¢ã‚¯ã‚»ã‚¹æ¨©NFTã®è©³ç´°è¨­å®š */}
          {selectedCategory === 'ACCESS_PASS' && (
            <div style={{
              background: 'rgba(255,255,255,0.05)',
              borderRadius: 12,
              padding: 32,
              border: '1px solid rgba(255,255,255,0.1)',
            }}>
              <p style={{ fontSize: 14, color: 'rgba(255,255,255,0.7)', marginBottom: 24 }}>
                ã‚¢ã‚¯ã‚»ã‚¹æ¨©NFTã¯ä¼šå“¡è¨¼NFTã¨åŒæ§˜ã®è¨­å®šã‚’ä½¿ç”¨ã—ã¾ã™ã€‚<br />
                åŸºæœ¬æƒ…å ±ã§è¨­å®šã—ãŸå†…å®¹ãŒã‚¢ã‚¯ã‚»ã‚¹æ¨©ã®æ¡ä»¶ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚
              </p>
              <div style={{
                padding: 20,
                background: 'rgba(16,185,129,0.1)',
                border: '1px solid rgba(16,185,129,0.3)',
                borderRadius: 8,
                marginBottom: 24,
              }}>
                <h4 style={{ fontSize: 14, fontWeight: 600, color: '#10b981', margin: '0 0 8px 0' }}>
                  ğŸ’¡ ã‚¢ã‚¯ã‚»ã‚¹æ¨©NFTã®ç”¨é€”
                </h4>
                <ul style={{ fontSize: 13, color: 'rgba(255,255,255,0.7)', margin: 0, paddingLeft: 20, lineHeight: 1.8 }}>
                  <li>ç‰¹å®šã‚¤ãƒ™ãƒ³ãƒˆã‚„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸ã®å…¥å ´æ¨©</li>
                  <li>é™å®šå…¬é–‹ã‚¨ãƒªã‚¢ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹</li>
                  <li>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®è¦–è´æ¨©</li>
                  <li>ç‰©ç†çš„ãªå ´æ‰€ã¸ã®å…¥å ´ãƒ‘ã‚¹</li>
                </ul>
              </div>

              {/* ãƒœã‚¿ãƒ³ */}
              <div style={{ display: 'flex', gap: 12 }}>
                <button
                  onClick={() => setCreateStep('basic')}
                  style={{
                    padding: '12px 24px',
                    background: 'rgba(255,255,255,0.1)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: 'pointer',
                  }}
                >
                  â† æˆ»ã‚‹
                </button>
                <button
                  onClick={() => {
                    alert('ä½œæˆå‡¦ç†ã¯æ¬¡ã®ã‚³ãƒŸãƒƒãƒˆã§å®Ÿè£…ã—ã¾ã™');
                    setView('list');
                  }}
                  style={{
                    padding: '12px 24px',
                    background: 'linear-gradient(135deg, #10b981 0%, #059669 100%)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: 'pointer',
                  }}
                >
                  ä½œæˆã—ã¦å…¬é–‹
                </button>
              </div>
            </div>
          )}

          {/* ã‚³ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ãƒ«NFTã®è©³ç´°è¨­å®š */}
          {selectedCategory === 'COLLECTIBLE' && (
            <div style={{
              background: 'rgba(255,255,255,0.05)',
              borderRadius: 12,
              padding: 32,
              border: '1px solid rgba(255,255,255,0.1)',
            }}>
              {/* æ³•å‹™è­¦å‘Š */}
              <div style={{
                padding: 16,
                background: 'rgba(239,68,68,0.1)',
                border: '1px solid rgba(239,68,68,0.3)',
                borderRadius: 8,
                marginBottom: 24,
              }}>
                <h4 style={{ fontSize: 14, fontWeight: 600, color: '#ef4444', margin: '0 0 8px 0' }}>
                  âš ï¸ æ³•å‹™å¯¾å¿œ: ãƒ¬ã‚¢ãƒªãƒ†ã‚£æ©Ÿèƒ½ã¯å®Ÿè£…ã—ã¾ã›ã‚“
                </h4>
                <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.7)', margin: 0, lineHeight: 1.6 }}>
                  æŠ•ã’éŠ­ï¼ˆãƒãƒƒãƒ—ï¼‰ã«å¯¾ã™ã‚‹é…å¸ƒç‰¹å…¸ã§ãƒ¬ã‚¢ãƒªãƒ†ã‚£ã‚’è¨­å®šã™ã‚‹ã¨ã€å°„å¹¸å¿ƒã®ç…½ã‚Šã€ã‚¬ãƒãƒ£è¦åˆ¶ã€è³­åšæ€§ãªã©ã®æ³•å‹™ãƒªã‚¹ã‚¯ãŒç™ºç”Ÿã—ã¾ã™ã€‚<br />
                  ã™ã¹ã¦ã®NFTã¯ç­‰ä¾¡å€¤ã¨ã—ã¦æ‰±ã„ã€ãƒ©ãƒ³ãƒ€ãƒ æ€§ã‚„å¸Œå°‘æ€§ã‚’æ’é™¤ã—ã¾ã™ã€‚
                </p>
              </div>

              {/* ã‚·ãƒªãƒ¼ã‚ºå */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  ã‚·ãƒªãƒ¼ã‚ºå <span style={{ color: '#ef4444' }}>*</span>
                </label>
                <input
                  type="text"
                  value={collectibleData.seriesName}
                  onChange={(e) => setCollectibleData(prev => ({ ...prev, seriesName: e.target.value }))}
                  placeholder="ä¾‹: å¤å­£é™å®šã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³"
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                />
              </div>

              {/* ã‚·ãƒªãƒ¼ã‚ºç•ªå·ã¨ç·æ•° */}
              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 16, marginBottom: 24 }}>
                <div>
                  <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                    ã‚·ãƒªãƒ¼ã‚ºå†…ã®ç•ªå·
                  </label>
                  <input
                    type="number"
                    value={collectibleData.seriesNumber}
                    onChange={(e) => setCollectibleData(prev => ({ ...prev, seriesNumber: e.target.value }))}
                    placeholder="ä¾‹: 1"
                    min="1"
                    style={{
                      width: '100%',
                      padding: '12px 16px',
                      background: 'rgba(255,255,255,0.1)',
                      border: '1px solid rgba(255,255,255,0.2)',
                      borderRadius: 8,
                      color: '#fff',
                      fontSize: 15,
                      outline: 'none',
                    }}
                  />
                </div>
                <div>
                  <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                    ã‚·ãƒªãƒ¼ã‚ºç·æ•°
                  </label>
                  <input
                    type="number"
                    value={collectibleData.totalInSeries}
                    onChange={(e) => setCollectibleData(prev => ({ ...prev, totalInSeries: e.target.value }))}
                    placeholder="ä¾‹: 10"
                    min="1"
                    style={{
                      width: '100%',
                      padding: '12px 16px',
                      background: 'rgba(255,255,255,0.1)',
                      border: '1px solid rgba(255,255,255,0.2)',
                      borderRadius: 8,
                      color: '#fff',
                      fontSize: 15,
                      outline: 'none',
                    }}
                  />
                </div>
              </div>

              {/* é…å¸ƒæ¡ä»¶ã‚¿ã‚¤ãƒ— */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  é…å¸ƒæ¡ä»¶ <span style={{ color: '#ef4444' }}>*</span>
                </label>
                <select
                  value={collectibleData.distributionTrigger}
                  onChange={(e) => setCollectibleData(prev => ({ ...prev, distributionTrigger: e.target.value as any }))}
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                  }}
                >
                  <option value="TIP_AMOUNT" style={{ background: '#1a1a1a' }}>ãƒãƒƒãƒ—é¡ã«ã‚ˆã‚‹ç¢ºå®šé…å¸ƒ</option>
                  <option value="EVENT_PARTICIPATION" style={{ background: '#1a1a1a' }}>ã‚¤ãƒ™ãƒ³ãƒˆå‚åŠ ã«ã‚ˆã‚‹é…å¸ƒ</option>
                  <option value="CAMPAIGN" style={{ background: '#1a1a1a' }}>ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ã«ã‚ˆã‚‹é…å¸ƒ</option>
                  <option value="MANUAL" style={{ background: '#1a1a1a' }}>æ‰‹å‹•é…å¸ƒ</option>
                </select>
                <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6 }}>
                  æ¡ä»¶é”æˆã«ã‚ˆã‚‹ç¢ºå®šé…å¸ƒã®ã¿ã€‚ãƒ©ãƒ³ãƒ€ãƒ é…å¸ƒãƒ»æŠ½é¸ã¯æ³•å‹™ãƒªã‚¹ã‚¯ã®ãŸã‚ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚
                </p>
              </div>

              {/* é…å¸ƒæ¡ä»¶ã®èª¬æ˜ */}
              <div style={{ marginBottom: 24 }}>
                <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                  é…å¸ƒæ¡ä»¶ã®èª¬æ˜
                </label>
                <textarea
                  value={collectibleData.requiredCondition}
                  onChange={(e) => setCollectibleData(prev => ({ ...prev, requiredCondition: e.target.value }))}
                  placeholder="ä¾‹: 10,000å††ä»¥ä¸Šã®ãƒãƒƒãƒ—ã§ç¢ºå®šé…å¸ƒï¼ˆå…ˆç€100åé™å®šï¼‰"
                  rows={3}
                  style={{
                    width: '100%',
                    padding: '12px 16px',
                    background: 'rgba(255,255,255,0.1)',
                    border: '1px solid rgba(255,255,255,0.2)',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    outline: 'none',
                    resize: 'vertical',
                  }}
                />
              </div>

              {/* ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³é€²æ— */}
              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 16, marginBottom: 24 }}>
                <div>
                  <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                    ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç›®æ¨™æ•°
                  </label>
                  <input
                    type="number"
                    value={collectibleData.collectionGoal}
                    onChange={(e) => setCollectibleData(prev => ({ ...prev, collectionGoal: e.target.value }))}
                    placeholder="ä¾‹: 10"
                    min="1"
                    style={{
                      width: '100%',
                      padding: '12px 16px',
                      background: 'rgba(255,255,255,0.1)',
                      border: '1px solid rgba(255,255,255,0.2)',
                      borderRadius: 8,
                      color: '#fff',
                      fontSize: 15,
                      outline: 'none',
                    }}
                  />
                  <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6 }}>
                    å…¨ç¨®é¡é›†ã‚ãŸã¨ãã®ç›®æ¨™æ•°
                  </p>
                </div>
                <div>
                  <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                    ã‚³ãƒ³ãƒ—ãƒªãƒ¼ãƒˆç‰¹å…¸NFT ID
                  </label>
                  <input
                    type="text"
                    value={collectibleData.progressReward}
                    onChange={(e) => setCollectibleData(prev => ({ ...prev, progressReward: e.target.value }))}
                    placeholder="ä¾‹: reward-nft-001"
                    style={{
                      width: '100%',
                      padding: '12px 16px',
                      background: 'rgba(255,255,255,0.1)',
                      border: '1px solid rgba(255,255,255,0.2)',
                      borderRadius: 8,
                      color: '#fff',
                      fontSize: 15,
                      outline: 'none',
                      fontFamily: 'monospace',
                    }}
                  />
                  <p style={{ fontSize: 12, color: 'rgba(255,255,255,0.5)', marginTop: 6 }}>
                    å…¨éƒ¨é›†ã‚ãŸäººã¸ã®ç‰¹å…¸NFT
                  </p>
                </div>
              </div>

              {/* ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ */}
              <details style={{ marginBottom: 24 }}>
                <summary style={{
                  cursor: 'pointer',
                  fontSize: 14,
                  fontWeight: 600,
                  color: '#fff',
                  marginBottom: 16
                }}>
                  ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)
                </summary>
                <div style={{ display: 'flex', flexDirection: 'column', gap: 16, marginTop: 16 }}>
                  <div>
                    <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                      ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆå
                    </label>
                    <input
                      type="text"
                      value={collectibleData.artist}
                      onChange={(e) => setCollectibleData(prev => ({ ...prev, artist: e.target.value }))}
                      placeholder="ä¾‹: å±±ç”°å¤ªéƒ"
                      style={{
                        width: '100%',
                        padding: '12px 16px',
                        background: 'rgba(255,255,255,0.1)',
                        border: '1px solid rgba(255,255,255,0.2)',
                        borderRadius: 8,
                        color: '#fff',
                        fontSize: 15,
                        outline: 'none',
                      }}
                    />
                  </div>
                  <div>
                    <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                      ãƒªãƒªãƒ¼ã‚¹æ—¥
                    </label>
                    <input
                      type="date"
                      value={collectibleData.releaseDate}
                      onChange={(e) => setCollectibleData(prev => ({ ...prev, releaseDate: e.target.value }))}
                      style={{
                        width: '100%',
                        padding: '12px 16px',
                        background: 'rgba(255,255,255,0.1)',
                        border: '1px solid rgba(255,255,255,0.2)',
                        borderRadius: 8,
                        color: '#fff',
                        fontSize: 15,
                        outline: 'none',
                      }}
                    />
                  </div>
                  <div>
                    <label style={{ display: 'block', fontSize: 14, fontWeight: 600, color: '#fff', marginBottom: 8 }}>
                      ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³èª¬æ˜
                    </label>
                    <textarea
                      value={collectibleData.description}
                      onChange={(e) => setCollectibleData(prev => ({ ...prev, description: e.target.value }))}
                      placeholder="ã“ã®ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®èƒŒæ™¯ã‚„ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’è¨˜è¼‰"
                      rows={3}
                      style={{
                        width: '100%',
                        padding: '12px 16px',
                        background: 'rgba(255,255,255,0.1)',
                        border: '1px solid rgba(255,255,255,0.2)',
                        borderRadius: 8,
                        color: '#fff',
                        fontSize: 15,
                        outline: 'none',
                        resize: 'vertical',
                      }}
                    />
                  </div>
                </div>
              </details>

              {/* ãƒœã‚¿ãƒ³ */}
              <div style={{ display: 'flex', gap: 12 }}>
                <button
                  onClick={() => setCreateStep('basic')}
                  style={{
                    padding: '12px 24px',
                    background: 'rgba(255,255,255,0.1)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: 'pointer',
                  }}
                >
                  â† æˆ»ã‚‹
                </button>
                <button
                  onClick={() => {
                    alert('ä½œæˆå‡¦ç†ã¯æ¬¡ã®ã‚³ãƒŸãƒƒãƒˆã§å®Ÿè£…ã—ã¾ã™');
                    setView('list');
                  }}
                  disabled={!collectibleData.seriesName}
                  style={{
                    padding: '12px 24px',
                    background: collectibleData.seriesName
                      ? 'linear-gradient(135deg, #10b981 0%, #059669 100%)'
                      : 'rgba(255,255,255,0.1)',
                    border: 'none',
                    borderRadius: 8,
                    color: '#fff',
                    fontSize: 15,
                    fontWeight: 600,
                    cursor: collectibleData.seriesName ? 'pointer' : 'not-allowed',
                    opacity: collectibleData.seriesName ? 1 : 0.5,
                  }}
                >
                  ä½œæˆã—ã¦å…¬é–‹
                </button>
              </div>
            </div>
          )}
        </div>
      )}
    </div>
  );
}
